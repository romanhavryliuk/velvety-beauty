{"version":3,"file":"index.js","sources":["../src/js/header.js","../src/js/modal.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n  // ---------- Desktop PAGES menu ----------\n  const desktopPageButton = document.querySelector(\n    '.header-button#page-toggle'\n  );\n  const desktopPageContainer = document.querySelector('.page-second-container');\n  const desktopPageItem = document.querySelector('.page');\n\n  if (desktopPageButton && desktopPageContainer) {\n    // Toggle меню при кліку на кнопку\n    desktopPageButton.addEventListener('click', e => {\n      e.stopPropagation();\n      const isOpen = desktopPageContainer.classList.contains('open');\n\n      if (isOpen) {\n        desktopPageContainer.classList.remove('open');\n        desktopPageButton.setAttribute('aria-expanded', 'false');\n      } else {\n        desktopPageContainer.classList.add('open');\n        desktopPageButton.setAttribute('aria-expanded', 'true');\n      }\n    });\n\n    // Закриття при кліку поза меню\n    document.addEventListener('click', e => {\n      if (desktopPageItem && !desktopPageItem.contains(e.target)) {\n        desktopPageContainer.classList.remove('open');\n        desktopPageButton.setAttribute('aria-expanded', 'false');\n      }\n    });\n\n    // Закриття при натисканні Escape\n    document.addEventListener('keydown', e => {\n      if (\n        e.key === 'Escape' &&\n        desktopPageContainer.classList.contains('open')\n      ) {\n        desktopPageContainer.classList.remove('open');\n        desktopPageButton.setAttribute('aria-expanded', 'false');\n      }\n    });\n  }\n  // ---------- Page submenu (existing second-menu) ----------\n  const submenuButtons = document.querySelectorAll('.btn-page-list');\n\n  const makeId = (prefix = 'page-submenu') =>\n    `${prefix}-${Math.random().toString(36).slice(2, 9)}`;\n\n  const closeAllSubmenus = (except = null) => {\n    document.querySelectorAll('.second-menu-item.open').forEach(item => {\n      if (item === except) return;\n      item.classList.remove('open');\n      const btn = item.querySelector('.btn-page-list');\n      if (btn) btn.setAttribute('aria-expanded', 'false');\n      const sub = item.querySelector('.page-submenu-container, .page-submenu');\n      if (sub) sub.hidden = true;\n    });\n  };\n\n  submenuButtons.forEach(button => {\n    // 1) спроба знайти підменю по aria-controls\n    const ariaId = button.getAttribute('aria-controls');\n    let submenu = ariaId ? document.getElementById(ariaId) : null;\n\n    // 2) якщо aria-controls або ID не існує — шукаємо підменю в межах .second-menu-item\n    const menuItem = button.closest('.second-menu-item');\n    if (!submenu && menuItem) {\n      submenu =\n        menuItem.querySelector('.page-submenu-container, .page-submenu') ||\n        null;\n    }\n\n    // 3) якщо підменю не знайдено — виходимо (лог для дебагу)\n    if (!submenu) {\n      console.warn('No submenu found for button', button);\n      return;\n    }\n\n    // 4) гарантуємо унікальний id і синхронізуємо aria-controls\n    if (!submenu.id) submenu.id = makeId();\n    button.setAttribute('aria-controls', submenu.id);\n\n    // 5) початковий стан (візьмемо aria-expanded якщо задано, інакше по класу)\n    const isOpenInit =\n      button.getAttribute('aria-expanded') === 'true' ||\n      menuItem?.classList.contains('open');\n    submenu.hidden = !isOpenInit;\n    button.setAttribute('aria-expanded', String(isOpenInit));\n    if (isOpenInit && menuItem) menuItem.classList.add('open');\n\n    // 6) клік — toggle + закрити інші\n    button.addEventListener('click', evt => {\n      evt.stopPropagation();\n      const willOpen = submenu.hidden; // true якщо зараз приховано -> будемо відкривати\n      // закриваємо інші, тільки якщо відкриваємо цей\n      if (willOpen) closeAllSubmenus(menuItem || null);\n\n      if (menuItem) menuItem.classList.toggle('open', willOpen);\n      submenu.hidden = !willOpen;\n      button.setAttribute('aria-expanded', String(willOpen));\n    });\n\n    // 7) клік по посиланню всередині підменю закриває його\n    submenu.addEventListener('click', e => {\n      if (e.target.closest('a')) {\n        submenu.hidden = true;\n        button.setAttribute('aria-expanded', 'false');\n        if (menuItem) menuItem.classList.remove('open');\n      }\n    });\n  });\n\n  // Закрити всі при кліку поза .second-menu або при Escape\n  document.addEventListener('click', evt => {\n    if (!evt.target.closest('.second-menu')) closeAllSubmenus();\n  });\n  document.addEventListener('keydown', evt => {\n    if (evt.key === 'Escape') closeAllSubmenus();\n  });\n\n  // ---------- Mobile slide-out menu (burger) ----------\n  const burger = document.querySelector('.burger');\n  const bigMenu = document.querySelector('.big-container-open-menu');\n  const mobileCloseBtns = document.querySelectorAll('.mobile-close');\n\n  if (burger && bigMenu) {\n    // ensure accessible attribute\n    burger.setAttribute(\n      'aria-expanded',\n      burger.getAttribute('aria-expanded') || 'false'\n    );\n    // ensure big menu aria-hidden reflects initial open state\n    bigMenu.setAttribute(\n      'aria-hidden',\n      bigMenu.classList.contains('open') ? 'false' : 'true'\n    );\n\n    const openMenu = open => {\n      bigMenu.classList.toggle('open', open);\n      // sync aria-hidden: when open -> false (not hidden), when closed -> true\n      bigMenu.setAttribute('aria-hidden', String(!open));\n      burger.setAttribute('aria-expanded', String(open));\n      // prevent background scroll when menu is open\n      document.body.style.overflow = open ? 'hidden' : '';\n      // move focus when opening\n      if (open) {\n        const first = bigMenu.querySelector(\n          '.mobile-close, .btn-page-list, a, button'\n        );\n        first?.focus();\n      } else {\n        burger.focus();\n      }\n    };\n\n    burger.addEventListener('click', evt => {\n      evt.stopPropagation();\n      const isOpen = bigMenu.classList.toggle('open');\n      // sync aria-hidden and aria-expanded\n      bigMenu.setAttribute('aria-hidden', isOpen ? 'false' : 'true');\n      burger.setAttribute('aria-expanded', String(isOpen));\n      document.body.style.overflow = isOpen ? 'hidden' : '';\n      if (isOpen) {\n        const first = bigMenu.querySelector(\n          '.mobile-close, .btn-page-list, a, button'\n        );\n        first?.focus();\n      } else {\n        burger.focus();\n      }\n    });\n\n    mobileCloseBtns.forEach(btn =>\n      btn.addEventListener('click', evt => {\n        evt.stopPropagation();\n        openMenu(false);\n      })\n    );\n\n    // clicking outside the big menu closes it\n    document.addEventListener('click', evt => {\n      if (\n        bigMenu.classList.contains('open') &&\n        !evt.target.closest('.big-container-open-menu') &&\n        !evt.target.closest('.burger')\n      ) {\n        openMenu(false);\n      }\n    });\n\n    // Escape closes the big menu too\n    document.addEventListener('keydown', evt => {\n      if (evt.key === 'Escape' && bigMenu.classList.contains('open'))\n        openMenu(false);\n    });\n  }\n});\n","(() => {\n  const refs = {\n    // Додати атрибут data-modal-open на кнопку відкриття\n    openModalBtn: document.querySelector(\"[data-mobile-open]\"),\n    // Додати атрибут data-modal-close на кнопку закриття\n    closeModalBtn: document.querySelector(\"[data-mobile-close]\"),\n    // Додати атрибут data-modal на бекдроп модалки\n    modal: document.querySelector(\"[data-mobile]\"),\n    // Додаємо body для керування скролом\n    body: document.body,\n  };\n\n  if (!refs.modal) return;\n\n  refs.openModalBtn.addEventListener(\"click\", toggleModal);\n  refs.closeModalBtn.addEventListener(\"click\", toggleModal);\n\n  function toggleModal() {\n    // is-open це клас який буде додаватися/забиратися на бекдроп при натисканні на кнопки\n    refs.modal.classList.toggle(\"is-open\");\n    // Перевіряємо чи є клас is-open на бекдропі\n    const isOpen = refs.modal.classList.contains(\"is-open\");\n    // Забираємо скрол коли модалка відкрита\n    refs.body.classList.toggle('no-scroll', isOpen);\n  }\n  // Закриваємо модалку при натисканні на Escape\n  window.addEventListener(\"keydown\", (event) => {\n    if (event.key === \"Escape\" && refs.modal.classList.contains(\"is-open\")) {\n      toggleModal();\n    }\n  });\n\n  refs.modal.addEventListener(\"click\", (e) => {\n    const link = e.target.closest(\"a[href]\");\n    if (!link) return;\n    \n    //Закриває модалку та переносить до відпопідної секції при натискані на лінк\n    if (link.getAttribute(\"href\")?.startsWith(\"#\")) {\n  toggleModal();\n}\n  });\n})();"],"names":["desktopPageButton","desktopPageContainer","desktopPageItem","submenuButtons","makeId","prefix","closeAllSubmenus","except","item","btn","sub","button","ariaId","submenu","menuItem","isOpenInit","evt","willOpen","e","burger","bigMenu","mobileCloseBtns","openMenu","open","isOpen","first","refs","toggleModal","event","link","_a"],"mappings":"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"}